appId: ${APP_ID}
name: Add to Favorites Flow Tests
---
- launchApp
- assertVisible: "email-input"

- tapOn: "email-input"
- inputText: "test@test.com"
- tapOn: "password-input"
- inputText: "123456"
- tapOn: "login-button"
- waitForAnimationToEnd

- extendedWaitUntil:
        timeout: 15000
        visible:
              - "movies-flatlist"
        then:

- tapOn: "movie-card-0"
- assertVisible: "movie-detail-screen"
- assertVisible: "favorite-button"

- takeScreenshot:
        name: "movie-detail"
        path: ".maestro/screenshots/movie-detail.png"

- tapOn: "favorite-button"
- waitForAnimationToEnd

- takeScreenshot:
        name: "favorited"
        path: ".maestro/screenshots/favorited.png"

- tapOn: "Favorilerim"
- assertVisible: "favorites-list"
- scrollUntilVisible:
        element:
              id: "movie-card-0"
        direction: DOWN

- takeScreenshot:
        name: "favorites-list"
        path: ".maestro/screenshots/favorites-list.png"
